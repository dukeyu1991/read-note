# redis集群

## sentinel
sentinel(哨兵)是redis高可用的解决方案：由一个或者多个sentinel的实例组成的sentinel系统可以监视任意多个主服务器及其从服务器。当检测到主服务器进入下线状态时，从其所属的从服务器中选取一个作为主服务器。  
sentinel的最后一步是向监控的主服务器创建网络连接，sentinel将成为主服务器的客户端。它可以向主服务器发送命令，也可以从回复中获取相关信息。  

### 检测下线状态
- 主观下线  
	默认情况下，sentinel会每秒向与它创建了命令连接的实例发送PING消息。通过PING命令的回复状态判定是否在线。
	1. 有效回复
	2. 无效回复
	超过了down-after-milliseconds之后，sentinel判定实例进入了主观下线状态
- 客观下线
	主观下线之后，需要通过客观下线判定是否真正的下线了。